{"version":3,"sources":["services/apiService.js","components/MovieCard/MovieCard.js","components/MovieCard/MovieCard.module.css","components/Searchform/Searchform.module.css","views/MoviesPage/MoviesPage.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/Searchform/Searchform.js","views/MoviesPage/MoviesPage.js"],"names":["baseUrl","apiKey","fetchRated","fetch","then","res","json","results","fetchByQuery","query","fetchById","movieId","type","getImgUrl","url","MovieCard","title","poster_path","release_date","date","Date","className","s","wrapper","image","src","alt","title_wrapper","getFullYear","module","exports","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Searchform","state","submitQuery","e","preventDefault","props","onSubmit","setState","handleChange","this","form","input","placeholder","onChange","button","Component","MoviesPage","movies","fetchMovies","films","handleChangeQuery","history","location","search","prevState","prevQuery","nextQuery","match","slice","list","map","movie","id","item","to","pathname","from","link","activeClassName","link_active"],"mappings":"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","file":"static/js/movies-page.21e1c755.chunk.js","sourcesContent":["const baseUrl = \"https://api.themoviedb.org/3/\";\nconst apiKey = \"4858d21346699d14f09ede89415e4aeb\";\n\nconst fetchRated = () => {\n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`\n  )\n    .then((res) => res.json())\n    .then(({ results }) => results);\n};\n\nconst fetchByQuery = (query) => {\n  if (query) {\n    return fetch(`${baseUrl}search/movie${query}&api_key=${apiKey}`)\n      .then((res) => res.json())\n      .then(({ results }) => results);\n  }\n};\n\nconst fetchById = (movieId, type) => {\n  switch (type) {\n    case \"credits\":\n      return fetch(\n        `${baseUrl}movie/${movieId}/credits?api_key=${apiKey}`\n      ).then((res) => res.json());\n    case \"reviews\":\n      return fetch(\n        `${baseUrl}movie/${movieId}/reviews?api_key=${apiKey}`\n      ).then((res) => res.json());\n    default:\n      return fetch(`${baseUrl}movie/${movieId}?api_key=${apiKey}`).then((res) =>\n        res.json()\n      );\n  }\n};\n\nconst getImgUrl = (url) => {\n  return `https://image.tmdb.org/t/p/original${url}`;\n};\n\nexport { fetchRated, fetchByQuery, fetchById, getImgUrl };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { getImgUrl } from \"../../services/apiService\";\n\nimport s from \"./MovieCard.module.css\";\n\nconst MovieCard = ({ title, poster_path, release_date }) => {\n  const date = new Date();\n  return (\n    <div className={s.wrapper}>\n      {poster_path ? (\n        <img className={s.image} src={`${getImgUrl(poster_path)}`} alt=\"\" />\n      ) : (\n        <img\n          className={s.image}\n          src={\n            \"https://dummyimage.com/400x600/cfcfcf/ffffff&text=NO+IMAGE+AVAILABLE\"\n          }\n          alt=\"\"\n        />\n      )}\n      <div className={s.title_wrapper}>\n        <p className={s.title}>\n          {title}({date.getFullYear(release_date)})\n        </p>\n      </div>\n    </div>\n  );\n};\n\nMovieCard.propTypes = {\n  poster_path: PropTypes.string,\n  release_date: PropTypes.string,\n};\n\nexport default MovieCard;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title_wrapper\":\"MovieCard_title_wrapper__i4HIF\",\"wrapper\":\"MovieCard_wrapper__1HzAs\",\"image\":\"MovieCard_image__3-J72\",\"title\":\"MovieCard_title__-9kzk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Searchform_form__302Uy\",\"input\":\"Searchform_input__22qoG\",\"button\":\"Searchform_button__1m3F1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movies\":\"MoviesPage_movies__2YYRc\",\"results\":\"MoviesPage_results__1ups8\",\"list\":\"MoviesPage_list__3cPxH\",\"item\":\"MoviesPage_item__2PmKJ\",\"link\":\"MoviesPage_link__1lzgm\"};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport s from \"./Searchform.module.css\";\n\nclass Searchform extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = { query: \"\" };\n\n  submitQuery = (e) => {\n    e.preventDefault();\n    const { query } = this.state;\n    this.props.onSubmit(query);\n    this.setState({ query: \"\" });\n  };\n\n  handleChange = (e) => {\n    this.setState({ query: e.target.value });\n  };\n\n  render() {\n    const { query } = this.state;\n    return (\n      <form className={s.form} onSubmit={this.submitQuery}>\n        <input\n          className={s.input}\n          type=\"text\"\n          placeholder=\"Search movies\"\n          value={query}\n          onChange={this.handleChange}\n        />\n        <button className={s.button} type=\"submit\">\n          Search\n        </button>\n      </form>\n    );\n  }\n}\n\nexport default Searchform;\n","import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport Searchform from \"../../components/Searchform/Searchform\";\nimport { fetchByQuery } from \"../../services/apiService\";\n\nimport s from \"./MoviesPage.module.css\";\nimport MovieCard from \"../../components/MovieCard/MovieCard\";\n\nclass MoviesPage extends Component {\n  state = {\n    movies: [],\n  };\n\n  componentDidMount() {\n    const query = this.props.location.search;\n    if (query) {\n      this.fetchMovies(query);\n    }\n  }\n\n  componentDidUpdate({ location: { search } }, prevState) {\n    const prevQuery = search;\n    const nextQuery = this.props.location.search;\n\n    if (prevQuery !== nextQuery) {\n      this.fetchMovies(nextQuery);\n    }\n  }\n\n  fetchMovies = (query) => {\n    if (query) {\n      fetchByQuery(query).then((films) => this.setState({ movies: films }));\n    }\n  };\n\n  handleChangeQuery = (query) => {\n    const { history, location } = this.props;\n    if (query.length > 0) {\n      history.push({\n        ...location,\n        search: `query=${query}`,\n      });\n    }\n  };\n\n  render() {\n    const { movies } = this.state;\n    const { match, location } = this.props;\n    return (\n      <div className={s.movies}>\n        <Searchform onSubmit={this.handleChangeQuery} />\n        {movies.length > 0 && (\n          <>\n            <p className={s.results}>\n              {\" \"}\n              Results for: {location.search.slice(7)}\n            </p>\n            <ul className={s.list}>\n              {movies.map((movie) => (\n                <li key={movie.id} className={s.item}>\n                  <NavLink\n                    to={{\n                      pathname: `${match.url}/${movie.id}`,\n                      state: { from: location },\n                    }}\n                    className={s.link}\n                    activeClassName={s.link_active}\n                  >\n                    <MovieCard {...movie} />\n                  </NavLink>\n                </li>\n              ))}\n            </ul>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default MoviesPage;\n"],"sourceRoot":""}