{"version":3,"sources":["services/apiService.js","components/Review/Review.module.css","components/Cast/Cast.module.css","views/MovieDetailsPage/MoviesDetailsPage.module.css","components/Review/Review.js","components/Review/Reviews.js","components/Cast/Cast.js","components/Cast/Casts.js","views/MovieDetailsPage/MoviesDetailsPage.js"],"names":["baseUrl","apiKey","fetchRated","fetch","then","res","json","results","fetchByQuery","query","fetchById","movieId","type","getImgUrl","url","module","exports","Review","reviews","this","props","map","id","author","content","className","s","review","key","Component","Reviews","state","fetchReviews","setState","total","length","Cast","casts","wrapper","profile_path","name","character","box","avatar","src","alt","empty","Casts","fetchCasts","cast","MovieDetailsPage","movie","handleGoBack","location","from","history","push","routes","movies","match","params","path","date","Date","page","button","onClick","card","poster_path","title","poster","getFullYear","release_date","overview","genres","adds","to","link","activeClassName","link_active","render"],"mappings":"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","file":"static/js/movies-details-page.1edd61d4.chunk.js","sourcesContent":["const baseUrl = \"https://api.themoviedb.org/3/\";\nconst apiKey = \"4858d21346699d14f09ede89415e4aeb\";\n\nconst fetchRated = () => {\n  return fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`\n  )\n    .then((res) => res.json())\n    .then(({ results }) => results);\n};\n\nconst fetchByQuery = (query) => {\n  if (query) {\n    return fetch(`${baseUrl}search/movie${query}&api_key=${apiKey}`)\n      .then((res) => res.json())\n      .then(({ results }) => results);\n  }\n};\n\nconst fetchById = (movieId, type) => {\n  switch (type) {\n    case \"credits\":\n      return fetch(\n        `${baseUrl}movie/${movieId}/credits?api_key=${apiKey}`\n      ).then((res) => res.json());\n    case \"reviews\":\n      return fetch(\n        `${baseUrl}movie/${movieId}/reviews?api_key=${apiKey}`\n      ).then((res) => res.json());\n    default:\n      return fetch(`${baseUrl}movie/${movieId}?api_key=${apiKey}`).then((res) =>\n        res.json()\n      );\n  }\n};\n\nconst getImgUrl = (url) => {\n  return `https://image.tmdb.org/t/p/original${url}`;\n};\n\nexport { fetchRated, fetchByQuery, fetchById, getImgUrl };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"review\":\"Review_review__1Fig6\",\"total\":\"Review_total__VSLzn\",\"author\":\"Review_author__1T25I\",\"content\":\"Review_content__2qU2n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Cast_wrapper__2l8H6\",\"box\":\"Cast_box__1XRSN\",\"avatar\":\"Cast_avatar__1wC-y\",\"name\":\"Cast_name__UvHXw\",\"empty\":\"Cast_empty__owHT0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"MoviesDetailsPage_page__KDnhC\",\"card\":\"MoviesDetailsPage_card__3dspO\",\"poster\":\"MoviesDetailsPage_poster__1k-Mg\",\"title\":\"MoviesDetailsPage_title__20lyT\",\"wrapper\":\"MoviesDetailsPage_wrapper__25qmw\",\"overview\":\"MoviesDetailsPage_overview__1rS5c\",\"genres\":\"MoviesDetailsPage_genres__2KkvO\",\"adds\":\"MoviesDetailsPage_adds__dULXE\",\"link\":\"MoviesDetailsPage_link__1JD-C\",\"link_active\":\"MoviesDetailsPage_link_active__1n4O2\",\"button\":\"MoviesDetailsPage_button__2wJ_i\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport s from \"./Review.module.css\";\n\nclass Review extends Component {\n  static propTypes = {\n    reviews: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        author: PropTypes.string.isRequired,\n        content: PropTypes.string.isRequired,\n      })\n    ),\n  };\n\n  render() {\n    const { reviews } = this.props;\n    return (\n      <>\n        {reviews.map(({ id, author, content }) => (\n          <div className={s.review} key={id}>\n            <h2 className={s.author}>Author: {author}</h2>\n            <p className={s.content}>{content}</p>\n          </div>\n        ))}\n      </>\n    );\n  }\n}\n\nexport default Review;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Review from \"./Review\";\nimport { fetchById } from \"../../services/apiService\";\n\nimport s from \"./Review.module.css\";\n\nclass Reviews extends Component {\n  static propTypes = {\n    movieId: PropTypes.string.isRequired,\n  };\n\n  state = { reviews: null };\n\n  componentDidMount() {\n    this.fetchReviews();\n  }\n\n  fetchReviews = () => {\n    fetchById(this.props.movieId, \"reviews\").then(({ results }) =>\n      this.setState({ reviews: results })\n    );\n  };\n\n  render() {\n    const { reviews } = this.state;\n    return (\n      <>\n        {reviews && (\n          <>\n            <h3 className={s.total}>Total reviews: {reviews.length}</h3>\n            <Review reviews={reviews} />\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nexport default Reviews;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { getImgUrl } from \"../../services/apiService\";\n\nimport s from \"./Cast.module.css\";\n\nclass Cast extends Component {\n  static propTypes = {\n    casts: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        profile_path: PropTypes.string,\n        name: PropTypes.string.isRequired,\n        character: PropTypes.string.isRequired,\n      })\n    ),\n  };\n\n  render() {\n    const { casts } = this.props;\n    return (\n      <div className={s.wrapper}>\n        {casts.map(({ id, profile_path, name, character }) => (\n          <div className={s.box} key={id}>\n            {profile_path ? (\n              <img\n                className={s.avatar}\n                src={`${getImgUrl(profile_path)}`}\n                alt={name}\n              />\n            ) : (\n              <div className={s.empty}></div>\n            )}\n            <h3 className={s.name}>{name}</h3>\n            <p>as {character}</p>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Cast;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Cast from \"./Cast\";\nimport { fetchById } from \"../../services/apiService\";\n\nclass Casts extends Component {\n  static propTypes = {\n    movieId: PropTypes.string.isRequired,\n  };\n\n  state = { casts: null };\n\n  componentDidMount() {\n    this.fetchCasts();\n  }\n\n  fetchCasts = () => {\n    fetchById(this.props.movieId, \"credits\").then(({ cast }) =>\n      this.setState({ casts: cast })\n    );\n  };\n\n  render() {\n    const { casts } = this.state;\n    return <>{casts && <Cast casts={casts} />}</>;\n  }\n}\n\nexport default Casts;\n","import React, { Component } from \"react\";\nimport { NavLink, Route } from \"react-router-dom\";\n\nimport routes from \"../../routes\";\nimport Reviews from \"../../components/Review/Reviews\";\nimport Casts from \"../../components/Cast/Casts\";\nimport { fetchById, getImgUrl } from \"../../services/apiService\";\n\nimport s from \"./MoviesDetailsPage.module.css\";\n\nclass MovieDetailsPage extends Component {\n  state = {\n    movie: null,\n  };\n\n  componentDidMount() {\n    fetchById(this.props.match.params.movieId).then((movie) =>\n      this.setState({ movie })\n    );\n  }\n\n  handleGoBack = () => {\n    const { state } = this.props.location;\n\n    if (state && state.from) {\n      return this.props.history.push(state.from);\n    }\n\n    this.props.history.push(routes.movies);\n  };\n\n  render() {\n    const { movie } = this.state;\n    const { url, path } = this.props.match;\n    const date = new Date();\n    return (\n      <div className={s.page}>\n        <button className={s.button} type=\"button\" onClick={this.handleGoBack}>\n          â—„ Back\n        </button>\n        <br />\n        {movie && (\n          <div className={s.card}>\n            {movie.poster_path ? (\n              <img\n                src={getImgUrl(movie.poster_path)}\n                alt={movie.title}\n                className={s.poster}\n              />\n            ) : (\n              <img\n                src={\n                  \"https://dummyimage.com/400x600/cfcfcf/ffffff&text=NO+IMAGE+AVAILABLE\"\n                }\n                alt={movie.title}\n                className={s.poster}\n              />\n            )}\n            <div className={s.wrapper}>\n              <h1 className={s.title}>\n                {movie.title}({date.getFullYear(movie.release_date)})\n              </h1>\n              <p className={s.overview}>{movie.overview}</p>\n              {movie.genres.length > 0 && (\n                <div className={s.genres}>\n                  <h3 className={s.genres}> Genres</h3>\n                  {movie.genres.map(({ name }) => (\n                    <span key={name}>{name}</span>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        <h2 className={s.adds}>Additional information</h2>\n        <NavLink\n          to={`${url}/reviews`}\n          className={s.link}\n          activeClassName={s.link_active}\n        >\n          Reviews\n        </NavLink>\n        <NavLink\n          to={`${url}/casts`}\n          className={s.link}\n          activeClassName={s.link_active}\n        >\n          Casts\n        </NavLink>\n\n        <Route\n          path={`${path}/reviews`}\n          render={({ match: { params } }) => {\n            return <Reviews movieId={params.movieId} />;\n          }}\n        />\n        <Route\n          path={`${path}/casts`}\n          render={({ match: { params } }) => {\n            return <Casts movieId={params.movieId} />;\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MovieDetailsPage;\n"],"sourceRoot":""}